---
import Client from '../../packages/digital_identity/src/index';

// Example: server-side placeholder greeting (no network call here)
const greeting = "Digital Identity / Item Tagging";
---

<head>
	<meta charset="utf-8" />
	<title>Digital Identity & Item Tagging</title>
	<link rel="stylesheet" href="../assets/app.css" />
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
		body {
			margin: 0;
			min-height: 100vh;
			font-family: 'Inter', sans-serif;
			background: radial-gradient(circle at top left, #1e1b4b, #0f172a);
			color: #e0e7ff;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 20px;
		}

		.container {
			width: 100%;
			max-width: 720px;
			background: rgba(22, 26, 48, 0.75);
			backdrop-filter: blur(14px);
			border: 1px solid rgba(124, 58, 237, 0.25);
			border-radius: 20px;
			box-shadow: 0 0 40px rgba(124, 58, 237, 0.25);
			padding: 40px 30px 28px;
		}

		header {
			text-align: center;
			margin-bottom: 30px;
		}

		.logo {
			font-size: 34px;
			font-weight: 800;
			background: linear-gradient(90deg, #a78bfa, #7dd3fc);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			text-shadow: 0 0 12px rgba(124, 58, 237, 0.4);
			display: flex;
			justify-content: center;
			align-items: center;
			gap: 10px;
		}
		.logo::before { content: "ü™™"; font-size: 36px; }

		.controls {
			margin-top: 20px;
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			gap: 10px;
		}

		.card {
			background: rgba(15, 19, 37, 0.85);
			backdrop-filter: blur(12px);
			border: 1px solid rgba(167, 139, 250, 0.18);
			border-radius: 16px;
			padding: 24px;
			margin-bottom: 24px;
			box-shadow: 0 8px 30px rgba(124, 58, 237, 0.18);
			transition: all 0.25s ease;
		}
		.card:hover {
			box-shadow: 0 8px 40px rgba(124, 58, 237, 0.35);
			transform: translateY(-2px);
		}

		h2, h3 {
			margin: 0 0 12px;
			font-weight: 700;
			display: flex;
			align-items: center;
			gap: 8px;
			font-size: 20px;
			color: #c4b5fd;
		}
		h2::before { content: "‚ú®"; }
		h3::before { content: "üîé"; }

		.form-hint {
			font-size: 14px;
			color: #9ca3af;
			margin-bottom: 10px;
		}

		label {
			font-size: 14px;
			color: #d1d5db;
			display: flex;
			flex-direction: column;
			flex: 1;
		}

		input, textarea {
			background: rgba(17, 24, 39, 0.9);
			border: 1px solid rgba(124, 58, 237, 0.4);
			padding: 12px;
			border-radius: 8px;
			color: #f9fafb;
			font-size: 15px;
			transition: border-color 0.2s ease, box-shadow 0.2s ease;
		}
		input:focus, textarea:focus {
			border-color: #a78bfa;
			box-shadow: 0 0 8px rgba(167, 139, 250, 0.4);
			outline: none;
		}

		.input-row {
			display: flex;
			gap: 12px;
			flex-wrap: wrap;
			margin-bottom: 10px;
		}
		.full { width: 100%; }

		.btn-main {
			background: linear-gradient(90deg, #7c3aed, #8b5cf6);
			color: white;
			border: none;
			padding: 12px 22px;
			border-radius: 10px;
			font-weight: 600;
			font-size: 15px;
			cursor: pointer;
			transition: all 0.25s ease;
			box-shadow: 0 0 12px rgba(124, 58, 237, 0.3);
		}
		.btn-main:hover {
			background: linear-gradient(90deg, #8b5cf6, #7dd3fc);
			box-shadow: 0 0 18px rgba(124, 58, 237, 0.5);
			transform: translateY(-1px);
		}

		.link-btn {
			background: none;
			border: none;
			color: #a78bfa;
			font-size: 14px;
			cursor: pointer;
			transition: color 0.2s;
		}
		.link-btn:hover { color: #fff; text-decoration: underline; }

		pre {
			background: rgba(15, 23, 42, 0.9);
			padding: 12px;
			border-radius: 10px;
			color: #cde9ff;
			font-size: 14px;
			overflow-x: auto;
			border: 1px solid rgba(124, 58, 237, 0.25);
		}

		.status {
			font-size: 13px;
			color: #9ca3af;
			margin-left: 8px;
		}

		.footer {
			text-align: center;
			font-size: 14px;
			color: #9ca3af;
			margin-top: 32px;
		}
	</style>
</head>

<body>
	<div class="container">
		<header>
			<div class="logo">Digital Identity & Item Tagging</div>
			<div class="controls">
				<div class="small">Network: <strong>testnet</strong></div>
				<div class="card" style="padding:8px 12px;display:flex;gap:8px;align-items:center">
					<input id="contract-id" placeholder="Set contract ID..." style="min-width:220px" />
					<button id="set-contract" class="btn-main">Set</button>
				</div>
				<div style="margin-left:12px">
					<a href="/products" style="text-decoration:none"><button class="btn-main">View Products</button></a>
				</div>
			</div>
		</header>

		<section class="card">
			<h2>Create Identity</h2>
			<div class="form-hint">ƒê·ªãnh danh ng∆∞·ªùi d√πng tr√™n blockchain. Nh·∫≠p public key v√† metadata (JSON ho·∫∑c chu·ªói).</div>
			<form id="identity-form">
				<div class="input-row">
					<label>
						Public Key:
						<input id="pubkey" name="pubkey" placeholder="G..." />
					</label>
					<label>
						Metadata:
						<input id="metadata" name="metadata" placeholder='{"name":"Alice"}' />
					</label>
				</div>
				<div class="full row" style="margin-top:8px">
					<button type="button" id="create-identity" class="btn-main">Create Identity</button>
					<span id="identity-status" class="status"></span>
				</div>
			</form>
		</section>

		<section class="card">
			<h2>Register Item</h2>
			<div class="form-hint">ƒêƒÉng k√Ω s·∫£n ph·∫©m v·ªõi th√¥ng tin chi ti·∫øt. Product Tag s·∫Ω sinh t·ª± ƒë·ªông.</div>
			<form id="item-form">
				<div class="input-row">
					<label>
						Item ID:
						<input id="item-id" name="item-id" placeholder="SKU12345" />
					</label>
					<label>
						Owner Public Key:
						<input id="item-owner" name="item-owner" placeholder="G..." />
					</label>
				</div>
				<div class="input-row">
					<label>
						Category:
						<input id="item-category" name="item-category" placeholder="Shoes, Electronics..." />
					</label>
					<label>
						Price:
						<input id="item-price" name="item-price" placeholder="99.99" />
					</label>
				</div>
				<label class="full">
					Item Metadata:
					<input id="item-meta" name="item-meta" placeholder='{"desc":"Shoes","size":"9"}' />
				</label>
				<label class="full">
					Image URL:
					<input id="item-image" name="item-image" placeholder="https://..." />
				</label>
				<div class="full row" style="margin-top:8px">
					<button type="button" id="register-item" class="btn-main">Register Item</button>
					<span id="item-status" class="status"></span>
				</div>
				<div class="full" style="margin-top:8px">
					<div class="small">Product Tag: <code id="product-tag">‚Äî</code>
					<button id="copy-tag" class="link-btn">Copy</button></div>
				</div>
			</form>
		</section>

		<section class="card">
			<h3>Lookup</h3>
			<div class="form-hint">Tra c·ª©u ƒë·ªãnh danh ho·∫∑c s·∫£n ph·∫©m ƒë√£ ƒëƒÉng k√Ω.</div>
			<div style="display:grid;gap:12px">
				<div class="row">
					<input id="lookup-key" placeholder="Public Key (G...)" style="flex:1" />
					<button id="lookup-identity" class="btn-main">Get Identity</button>
				</div>
				<pre id="identity-result">No query yet.</pre>
				<div class="row">
					<input id="lookup-item" placeholder="Item ID" style="flex:1" />
					<button id="lookup-item-btn" class="btn-main">Get Item</button>
				</div>
				<pre id="item-result">No query yet.</pre>
			</div>
		</section>

		<section class="card">
			<h3>Raw Response / Debug</h3>
			<pre id="debug">Ready.</pre>
		</section>

		<div class="footer">
			üåê Tip: Set the deployed contract ID above to enable actions.<br>
			üîé Use <b>View Products</b> ƒë·ªÉ xem s·∫£n ph·∫©m ƒë√£ ƒëƒÉng k√Ω.<br>
			¬© {new Date().getFullYear()} Digital Identity Demo
		</div>
	</div>

	<script type="module" src="../assets/app.js"></script>
</body>